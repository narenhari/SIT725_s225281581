<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="icon" href="/img/logo/icon.png" type="image/png">
    <% const resolvedTitle = typeof title === 'undefined' || title === null ? '' : title; %>
    <title><%= resolvedTitle ? `${resolvedTitle} | ` : '' %>Alive Sleep Tracker</title>
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css"/>
    <link rel="stylesheet" href="/css/base.css"/>
    <link rel="stylesheet" href="/css/layout.css"/>
    <link rel="stylesheet" href="/css/header.css"/>
    <% if (typeof isErrorPage !== 'undefined' && isErrorPage) { %>
        <link rel="stylesheet" href="/css/errors.css"/>
    <% } %>
    <% if (typeof isDashboard !== 'undefined' && isDashboard) { %>
        <link rel="stylesheet" href="/css/dashboard.css"/>
    <% } %>
    <% if (typeof isProfileSection !== 'undefined' && isProfileSection) { %>
        <link rel="stylesheet" href="/css/profile.css"/>
    <% } %>
    <% if (typeof isSupportChat !== 'undefined' && isSupportChat) { %>
        <link rel="stylesheet" href="/css/supportChat.css"/>
    <% } %>
</head>

<body class="white">
<div class="navbar-fixed">
    <nav class="top-nav" id="top-nav" aria-label="Main navigation">
        <div class="nav-shell">

            <div class="nav-left">
                <a href="/" class="nav-brand">
                    <img src="/img/logo/logo-horizontal.svg" alt="Alive logo" class="brand-logo"/>
                </a>
            </div>

            <a href="#" data-target="mobile-nav" class="sidenav-trigger black-text header-mobile-trigger" aria-label="Open menu">
                <i class="material-icons">menu</i>
            </a>

            <div class="nav-center header-desktop-only">
                <div class="nav-pill">
                    <ul class="nav-menu">
                        <%- include('./navMenu') %>
                    </ul>
                </div>
            </div>

            <div class="nav-right header-desktop-only">
                <% if (typeof isAuthenticated !== 'undefined' && isAuthenticated) { %>
                    <% if (typeof isDashboard !== 'undefined' && isDashboard) { %>
                        <a href="/" class="nav-signin black">Main Site</a>
                    <% } else { %>
                        <a href="/dashboard" class="nav-signin black">Dashboard</a>
                    <% } %>

                    <div class="header-profile-wrap">
                        <button type="button" class="header-profile-btn" id="header-profile-btn" aria-haspopup="true" aria-expanded="false" aria-label="Account menu">
                            <i class="material-icons" id="nav-user-icon">person</i>
                        </button>
                        <div class="header-profile-dropdown" id="header-profile-dropdown" aria-hidden="true">
                            <div class="dropdown-section dropdown-welcome">
                                Welcome,
                                <a href="/profile" class="dropdown-welcome-link"><%= (typeof user !== 'undefined' && user.name) ? user.name : 'User' %></a>
                            </div>
                            <div class="dropdown-section dropdown-links">
                                <a href="/profile" class="dropdown-link">
                                    <i class="material-icons">notifications</i>
                                    <span id="notif-text" class="dropdown-messages-text">You have no new messages</span>
                                </a>
                            </div>
                            <div class="dropdown-section dropdown-links">
                                <a href="/profile" class="dropdown-link"><i class="material-icons">person</i> Profile</a>
                                <a href="/profile/schedules" class="dropdown-link"><i class="material-icons">schedule</i> Sleep Schedules</a>
                                <a href="/profile/support" class="dropdown-link"><i class="material-icons">support_agent</i> Support Chat</a>
                            </div>
                            <div class="dropdown-section dropdown-footer">
                                <a href="/auth/logout" class="dropdown-link dropdown-signout"><i class="material-icons">logout</i> Sign out</a>
                            </div>
                        </div>
                    </div>
                <% } else { %>
                    <a href="/auth/login" class="nav-signin black">Sign In</a>
                <% } %>
            </div>

        </div>
    </nav>
</div>

<ul class="sidenav" id="mobile-nav">
    <%- include('./navMenu') %>
    <% if (typeof isAuthenticated !== 'undefined' && isAuthenticated) { %>
        <li><a href="/dashboard">Dashboard</a></li>
        <li><a href="/profile">Profile</a></li>
        <li><a href="/profile/schedules">Sleep Schedules</a></li>
        <li><a href="/profile/support">Support Chat</a></li>
        <li><a href="/auth/logout">Sign Out</a></li>
    <% } else { %>
        <li><a href="/auth/login">Sign In</a></li>
    <% } %>
</ul>


